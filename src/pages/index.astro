---
import { getUserFromRequest } from '../lib/auth';

const user = await getUserFromRequest(Astro.request);

if (user) {
	return Astro.redirect(user.role === 'admin' ? '/dashboard' : '/transactions');
} else {
	return Astro.redirect('/login');
}
---
