---
import type { Category } from '../lib/types';
import { getToday, formatDate } from '../lib/dates';

interface Props {
	categories: Category[];
	defaultDate?: string;
}

const { categories, defaultDate = formatDate(getToday()) } = Astro.props;
---

<form method="POST" action="/transactions/new" class="bg-white rounded-lg shadow p-6 mb-6">
	<h2 class="text-lg font-semibold text-gray-900 mb-4">New Transaction</h2>
	
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div>
			<label for="date" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
			<input
				type="date"
				id="date"
				name="date"
				value={defaultDate}
				required
				class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>

		<div>
			<label class="block text-sm font-medium text-gray-700 mb-1">Type</label>
			<div class="flex space-x-4">
				<label class="flex items-center">
					<input type="radio" name="type" value="income" checked class="mr-2" />
					<span>Income</span>
				</label>
				<label class="flex items-center">
					<input type="radio" name="type" value="expense" class="mr-2" />
					<span>Expense</span>
				</label>
			</div>
		</div>

		<div>
			<label for="amount" class="block text-sm font-medium text-gray-700 mb-1">Amount (â‚¬)</label>
			<input
				type="number"
				id="amount"
				name="amount"
				step="0.01"
				min="0"
				required
				class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>

		<div>
			<label for="categoryId" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
			<select
				id="categoryId"
				name="categoryId"
				required
				class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			>
				<option value="">Select category</option>
				{categories.map(cat => (
					<option value={cat.id}>{cat.name}</option>
				))}
			</select>
		</div>

		<div class="md:col-span-2">
			<label for="note" class="block text-sm font-medium text-gray-700 mb-1">Note</label>
			<input
				type="text"
				id="note"
				name="note"
				class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>
	</div>

	<div class="mt-4 flex space-x-3">
		<button
			type="submit"
			name="action"
			value="save"
			class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
		>
			Save
		</button>
		<button
			type="submit"
			name="action"
			value="saveAndAdd"
			class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"
		>
			Save & Add Another
		</button>
	</div>
</form>
